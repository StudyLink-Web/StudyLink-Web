<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StudyLink - 로그인</title>
    <meta name="_csrf" th:content="${_csrf.token}" />
    <meta name="_csrf_header" th:content="${_csrf.headerName}" />

    <link rel="stylesheet" href="/css/header-style.css">
    <link rel="stylesheet" href="/css/login.css">
</head>
<body>
<header th:insert="fragments/header.html :: header"></header>

<div class="login-wrapper">
    <div class="login-container">
        <div class="login-card">
            <div class="card-content">
                <div class="logo-title">로그인</div>
                <div class="logo-subtitle">StudyLink에 로그인하여 학습을 시작하세요</div>

                <!-- ✅ CSRF 토큰 포함 -->
                <form id="loginForm" method="POST" action="/loginProc" class="login-form">
                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />

                    <!-- ✅ name="email" (SecurityConfig의 usernameParameter와 일치) -->
                    <div class="form-group">
                        <label for="email" class="form-label">이메일</label>
                        <input type="email" id="email" name="email" class="form-control"
                               placeholder="your@email.com" required>
                    </div>

                    <!-- ✅ name="password" (SecurityConfig의 passwordParameter와 일치) -->
                    <!-- 비밀번호 필드 (복사해서 사용) -->
                    <div class="form-group">
                        <label for="password" class="form-label">비밀번호</label>

                        <div class="password-input-wrapper">
                            <input type="password" id="password" name="password" class="form-control"
                                   placeholder="비밀번호 입력" required>

                            <!-- ✅ 눈 아이콘 버튼 (input 안에 오른쪽 배치) -->
                            <button type="button" id="togglePasswordBtn" class="toggle-password" aria-label="비밀번호 표시">

                                <!-- eye closed (기본 상태) -->
                                <svg id="eyeClosed" xmlns="http://www.w3.org/2000/svg"
                                     width="20" height="20" viewBox="0 0 24 24"
                                     fill="none" stroke="currentColor" stroke-width="2"
                                     stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M17.94 17.94A10.94 10.94 0 0 1 12 20
                 c-5 0-9.27-3.11-11-7.5
                 a11.05 11.05 0 0 1 5.17-5.81"/>
                                    <path d="M1 1l22 22"/>
                                    <path d="M9.53 9.53A3.5 3.5 0 0 0 12 15.5
                 a3.5 3.5 0 0 0 2.47-5.97"/>
                                </svg>

                                <!-- eye open (클릭 시) -->
                                <svg id="eyeOpen" xmlns="http://www.w3.org/2000/svg"
                                     width="20" height="20" viewBox="0 0 24 24"
                                     fill="none" stroke="currentColor" stroke-width="2"
                                     stroke-linecap="round" stroke-linejoin="round"
                                     style="display: none;">
                                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                                    <circle cx="12" cy="12" r="3"/>
                                </svg>
                            </button>
                        </div>
                    </div>

                    <div class="form-options">
                        <label class="form-checkbox">
                            <input type="checkbox" id="remember" name="remember">
                            <span class="form-checkbox-label">이메일 기억하기</span>
                        </label>
                        <a href="/forgot-password" class="form-link">비밀번호 찾기</a>
                    </div>

                    <button type="submit" class="btn-login">로그인</button>
                </form>

                <div class="mobile-signup-prompt">
                    계정이 없으신가요? <a href="/signup">회원가입</a>
                </div>
            </div>
        </div>

        <div class="login-side">
            <div class="side-content">
                <h2>StudyLink에 오신 것을<br>환영합니다! 🎓</h2>
                <p>
                    학생과 멘토를 연결하는 플랫폼입니다.<br>
                    질문을 하고 답변을 받으며 함께 성장해보세요.
                </p>

                <ul class="feature-list">
                    <li>• 실시간 Q&A 답변</li>
                    <li>• 경험 많은 멘토와의 연결</li>
                    <li>• 맞춤형 학습 커뮤니티</li>
                </ul>

                <div class="social-login-section">
                    <div class="social-login-title">소셜 로그인으로 더 빠르게!</div>
                    <div class="social-buttons">
                        <a href="#" class="btn-social btn-kakao"> 🟡 카카오로 계속하기</a>
                        <a href="#" class="btn-social btn-naver"> 🟢 네이버로 계속하기</a>
                        <a href="#" class="btn-social btn-google"> 🔵 구글로 계속하기</a>
                    </div>
                </div>

                <div class="signup-prompt">
                    아직 회원이 아니신가요?<br>
                    <a href="/signup" class="signup-link">회원가입하기 →</a>
                </div>
            </div>
        </div>
    </div>
</div>

<script th:src="@{/js/login.js}"></script>
<script th:src="@{/js/header.js}"></script>
</body>
</html>