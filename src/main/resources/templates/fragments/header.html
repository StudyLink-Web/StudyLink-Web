<header th:fragment="header"
		class="site-header"
		xmlns:th="http://www.thymeleaf.org"
		xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

	<link rel="stylesheet" th:href="@{/css/header-style.css}">
	<link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">

	<div class="header">
		<div class="header-inner">

			<!-- ๋ก๊ณ -->
			<a href="/" class="logo">๐ StudyLink</a>

			<!-- โญ ๋ณ๊ฒฝ: sec:authorize โ th:if + sec:authorize -->
			<!-- ๋ก๊ทธ์ธ ์ -->
			<ul class="header-nav" th:if="${#authorization.expression('isAnonymous()')}">
				<li>
					<a th:href="@{/room/list}" class="header-nav-link">๋ฌธ์ ๋ฆฌ์คํธ</a>
				</li>
				<li>
					<a th:href="@{/chatbot}" class="header-nav-link">AI ๋์ ์๋ด</a>
				</li>
				<li>
					<a th:href="@{/board/list}" class="header-nav-link">๋ํ์ํ ๊ฒ์ํ</a>
				</li>
				<li>
					<a th:href="@{/login}" class="header-nav-link">๋ก๊ทธ์ธ</a>
				</li>
				<li>
					<a th:href="@{/signup}" class="header-nav-link">ํ์๊ฐ์</a>
				</li>
			</ul>

			<!-- ๋ก๊ทธ์ธ ํ -->
			<ul class="header-nav" th:if="${#authorization.expression('isAuthenticated()')}">
				<li>
					<a th:href="@{/room/list}" class="header-nav-link">๋ฌธ์ ๋ฆฌ์คํธ</a>
				</li>
				<li>
					<a th:href="@{/chatbot}" class="header-nav-link">AI ๋์ ์๋ด</a>
				</li>
				<li>
					<a th:href="@{/board/list}" class="header-nav-link">๋ํ์ํ ๊ฒ์ํ</a>
				</li>
				<li><a th:href="@{/dashboard}" class="header-nav-link">๋์๋ณด๋</a></li>

				<li class="dropdown">
					<a href="#"
					   class="header-nav-link dropdown-toggle"
					   id="userDropdown"
					   role="button"
					   data-toggle="dropdown"
					   aria-expanded="false"
					   style="cursor: pointer;" >

						<!-- ๐ค <span th:text="${#authentication.principal.attributes['name']}"></span> --->
						<!-- ๐ค <span th:text="${#authentication.name}"></span> -->

						<!-- OAuth2 ๋ก๊ทธ์ธ(Google/Kakao/Naver)์์๋ name, ๋ก์ปฌ ํผ ๋ก๊ทธ์ธ์์๋ username ์ฌ์ฉ -->
						<!--
						<span th:with="userName=${
							#authentication.principal.attributes != null && #authentication.principal.attributes['name'] != null
								? #authentication.principal.attributes['name']
								: #authentication.name
						}" th:text="${userName}">
						</span>
						-->

						๐ค <span th:text="${
							   #authentication.principal instanceof T(org.springframework.security.oauth2.core.user.DefaultOAuth2User)
								 ? #authentication.principal.attributes['name']
								 : #authentication.name
							}">
							</span>



					</a>

					<ul class="dropdown-menu dropdown-menu-right">
						<li><a class="dropdown-item" href="/my-page"> ํ๊ฒฝ์ค์(๋ง์ดํ์ด์ง) </a></li>
						<li><a class="dropdown-item" href="/auth/student-verification">๋ฉํ ์ธ์ฆ</a></li>
						<li><hr class="dropdown-divider"></li>
						<li>
							<form method="post" th:action="@{/logout}" style="display: inline; width: 100%;">
								<button type="submit" class="dropdown-item" style="background: none; border: none; cursor: pointer; text-align: left; width: 100%; padding: 10px 16px;">
									๋ก๊ทธ์์
								</button>
							</form>
						</li>
					</ul>
				</li>
			</ul>

			<!-- D-Day -->
			<!-- header.html ๋ง์ง๋ง ๋ถ๋ถ์ ์ถ๊ฐ/์์ -->
			<div class="header-buttons">
				<!-- ๋ก๊ทธ์ธ ์ํ์ผ ๋ -->
				<th:block th:if="${user != null}">
					<div class="dday">
						<p>์๋ฅ๊น์ง </p>
						<span th:attr="data-dday=${dday}" th:text="${dday}"></span>
					</div>
				</th:block>

				<th:block th:if="${user == null}">
					<div class="dday">
						<p>์๋ฅ๊น์ง </p>
						<span th:attr="data-dday=${dday}" th:text="${dday}"></span>
					</div>
				</th:block>
			</div>

		</div>
	</div>
</header>

