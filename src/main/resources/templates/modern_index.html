<!doctype html>
<html
  lang="ko"
  xmlns:th="http://www.thymeleaf.org"
  xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  layout:decorate="~{layout/layout}"
>
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"
    />
    <title>Study Link - AI ì…ì‹œ ì»¨ì„¤íŒ…</title>

    <!-- iOS PWA ì „ìš© ë©”íƒ€ íƒœê·¸ (íŒ¨ë“œì—ì„œ ì•±ì²˜ëŸ¼ ì‘ë™í•˜ê²Œ í•¨) -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <meta name="apple-mobile-web-app-title" content="Study Link" />
    <link rel="apple-touch-icon" th:href="@{/pwa-192x192.png}" />

    <!-- Pretendard í°íŠ¸ -->
    <link
      href="https://fonts.googleapis.com/css2?family=Pretendard:wght@300;400;500;600;700;800&display=swap"
      rel="stylesheet"
    />

    <!-- CSRF í† í° -->
    <meta name="_csrf" th:content="${_csrf.token}" />
    <meta name="_csrf_header" th:content="${_csrf.headerName}" />


    <!-- ë¦¬ì•¡íŠ¸ ìŠ¤íƒ€ì¼ -->
    <link rel="stylesheet" th:href="@{/js/react-main.css}" />

    <!-- ğŸ“ PWA manifest (ë„ë©”ì¸ ë£¨íŠ¸ ìœ„ì¹˜ ë°˜ì˜) -->
    <link rel="manifest" th:href="@{/manifest.webmanifest}" />

    <style>
      /* ğŸ“ íŒ€ì› ì†ŒìŠ¤ ë³´í˜¸ ë° ë ˆì´ì•„ì›ƒ ìµœì í™” */
      .content_box {
        max-width: none !important;
        margin: 0 !important;
        padding: 0 !important;
        background: transparent !important;
        min-height: 80vh !important;
        display: block !important;
      }

      #root {
        background-color: transparent;
        position: relative;
        z-index: 10;
      }

      @media (max-width: 1024px) {
        .header {
          height: auto !important;
          min-height: 70px !important;
        }
        .header-inner {
          height: auto !important;
          flex-wrap: wrap !important;
          padding: 10px !important;
        }
        .header-nav {
          display: flex !important;
          padding: 5px 0 !important;
          overflow-x: auto !important;
          width: 100% !important;
        }
      }
    </style>

    <script>
      // ğŸ›¡ï¸ [Service Worker Polyfill] - íŒ¨ë“œ ë° ì¼ë¶€ ë¸Œë¼ìš°ì € í¬ë˜ì‹œ ë°©ì§€
      // ì‹¤ì œ ì§€ì› ì—¬ë¶€ì™€ ìƒê´€ì—†ì´ ê°ì²´ê°€ ì¡´ì¬í•˜ê²Œ í•˜ì—¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì´ˆê¸° ë¡œë”© ì—ëŸ¬ë¥¼ ë§‰ìŒ
      if (typeof navigator !== "undefined" && !navigator.serviceWorker) {
        Object.defineProperty(navigator, "serviceWorker", {
          get: function () {
            return {
              register: function () {
                return Promise.reject("Not supported");
              },
              addEventListener: function () {},
              removeEventListener: function () {},
              getRegistrations: function () {
                return Promise.resolve([]);
              },
              ready: new Promise(function () {}),
            };
          },
        });
      }
    </script>
  </head>

  <div layout:fragment="content" class="content_box">
    <!-- ë¦¬ì•¡íŠ¸ ì•± ë§ˆìš´íŠ¸ í¬ì¸íŠ¸ -->
    <div id="root"></div>

    <!-- ì´ˆê¸° ë°ì´í„° ì „ë‹¬ -->
    <script th:inline="javascript">
      window.__INITIAL_DATA__ = {
        user: /*[[${user}]]*/ null,
        isAuthenticated: /*[[${isAuthenticated}]]*/ false,
        topMentors: /*[[${topMentors}]]*/ [],
      };
    </script>

    <!-- ë¦¬ì•¡íŠ¸ ë¹Œë“œ íŒŒì¼ ë¡œë“œ -->
    <script type="module" th:src="@{/js/react-main.js}"></script>
  </div>
</html>
