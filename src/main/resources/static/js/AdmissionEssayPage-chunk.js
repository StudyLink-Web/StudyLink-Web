import{c as d,r,j as e,S as b,R as O}from"./react-main.js";const P=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],U=d("arrow-left",P);const V=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],q=d("clipboard",V);const R=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],$=d("file-text",R);const F=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],g=d("loader-circle",F);const J=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],K=d("plus",J);const B=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],G=d("save",B);const W=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Q=d("trash-2",W),Z=()=>{const[n,i]=r.useState("list"),[f,C]=r.useState([]),[S,k]=r.useState(!1),[c,w]=r.useState(!1),[s,l]=r.useState({title:"",questionNum:1,questionText:"고등학교 재학 기간 중 자신의 진로와 관련하여 어떤 노력을 해왔는지 본인에게 의미 있는 학습 경험과 교내 활동을 중심으로 기술해 주시기 바랍니다. (1500자 이내)",keywords:[],keywordInput:"",tone:"논리적인",targetUniversity:"",targetMajor:""}),[x,j]=r.useState(""),[E,h]=r.useState(!1),[p,y]=r.useState(""),[v,N]=r.useState(!1),[o,m]=r.useState(null);r.useEffect(()=>{(async()=>await Promise.all([u(),z()]))()},[]);const u=async()=>{k(!0);try{const t=await fetch("/api/cover-letter/list");if(t.ok){const a=await t.json();C(a)}}catch{console.error("자소서 목록 로드 실패")}finally{k(!1)}},z=async()=>{try{const t=await fetch("/api/dashboard/data");if(t.ok){const a=await t.json();a.profile&&l(D=>({...D,targetUniversity:a.profile.targetUniversity||"",targetMajor:a.profile.targetMajor||""}))}}catch{console.error("프로필 정보 로드 실패")}},M=()=>{s.keywordInput.trim()&&!s.keywords.includes(s.keywordInput.trim())&&l({...s,keywords:[...s.keywords,s.keywordInput.trim()],keywordInput:""})},I=t=>{l({...s,keywords:s.keywords.filter(a=>a!==t)})},T=async()=>{w(!0);try{const t=await fetch("/api/cover-letter/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(t.ok){const a=await t.json();j(a.content)}}catch{alert("AI 생성 중 오류가 발생했습니다.")}finally{w(!1)}},_=async()=>{try{(await fetch("/api/cover-letter/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({request:s,content:x})})).ok&&(alert("자소서가 저장되었습니다."),i("list"),u())}catch{alert("저장 중 오류가 발생했습니다.")}},A=async()=>{if(!p.trim())return alert("생기부 내용을 입력해주세요.");N(!0);try{const t=await fetch("/api/cover-letter/extract",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({rawText:p})});if(t.ok){const a=await t.json();m(a)}}catch{alert("데이터 추출 중 오류가 발생했습니다.")}finally{N(!1)}},L=()=>{o&&(l({...s,keywords:[...new Set([...s.keywords,...o.keywords])],title:s.title||o.suggestedTitle}),h(!1),y(""),m(null),alert("키워드와 제목이 적용되었습니다."))},H=async t=>{if(window.confirm("정말 삭제하시겠습니까?"))try{(await fetch(`/api/cover-letter/${t}`,{method:"DELETE"})).ok&&u()}catch{alert("삭제 실패")}};return e.jsx("div",{className:"min-h-screen bg-white dark:bg-[#030014] pt-24 pb-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white flex items-center gap-3",children:[e.jsx(b,{className:"text-purple-500"}),"AI 대입 자소서 메이커"]}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2",children:"나의 경험 키워드를 바탕으로 합격 자소서 초안을 만듭니다."})]}),n==="list"?e.jsxs("button",{onClick:()=>i("create"),style:{backgroundColor:"#4f46e5"},className:"px-6 py-3 text-white rounded-2xl font-bold flex items-center gap-2 transition-all shadow-lg shadow-indigo-500/20 hover:opacity-90 active:scale-95",children:[e.jsx(K,{size:20,color:"white"}),e.jsx("span",{className:"text-white",children:"새 자소서 작성"})]}):e.jsxs("button",{onClick:()=>i("list"),className:"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white flex items-center gap-2",children:[e.jsx(U,{size:20})," 목록으로"]})]}),n==="list"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:S?e.jsx("div",{className:"col-span-full flex justify-center py-20",children:e.jsx(g,{className:"animate-spin text-purple-500",size:40})}):f.length===0?e.jsxs("div",{className:"col-span-full text-center py-20 bg-white dark:bg-white/5 rounded-[2rem] border border-slate-200 dark:border-white/10",children:[e.jsx($,{className:"mx-auto text-slate-300 dark:text-slate-700 mb-4",size:60}),e.jsx("p",{className:"text-slate-500",children:"저장된 자소서가 없습니다. 첫 초안을 만들어보세요!"})]}):f.map(t=>e.jsxs("div",{className:"p-6 bg-white dark:bg-white/5 rounded-[2rem] border border-slate-200 dark:border-white/10 hover:shadow-lg transition-all group",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:t.title}),e.jsx("button",{onClick:()=>H(t.coverLetterId),className:"text-slate-400 hover:text-red-500 transition-colors",children:e.jsx(Q,{size:18})})]}),e.jsxs("div",{className:"space-y-2 mb-6 text-sm text-slate-500",children:[e.jsxs("p",{children:["지원 대학: ",t.targetUniversity]}),e.jsxs("p",{children:["지원 학과: ",t.targetMajor]}),e.jsxs("p",{children:["작성일: ",new Date(t.createdAt).toLocaleDateString()]})]}),e.jsx("button",{onClick:()=>{j(t.content),l({...s,title:t.title,targetUniversity:t.targetUniversity,targetMajor:t.targetMajor,questionNum:t.questionNum}),i("edit")},className:"w-full py-2 bg-slate-100 dark:bg-white/10 hover:bg-purple-100 dark:hover:bg-purple-500/20 text-slate-600 dark:text-slate-300 rounded-xl transition-all",children:"내용 보기"})]},t.coverLetterId))}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"p-6 bg-white dark:bg-white/5 rounded-[2rem] border border-slate-200 dark:border-white/10 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900 dark:text-white flex items-center gap-2",children:"1. 정보 및 키워드 입력"}),e.jsx("button",{onClick:()=>h(!0),className:"text-xs font-bold text-purple-600 dark:text-purple-400 bg-purple-50 dark:bg-purple-500/10 px-3 py-1.5 rounded-lg border border-purple-200 dark:border-purple-500/20 hover:bg-purple-100 transition-all",children:"✨ 생기부로 키워드 생성"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"자소서 제목"}),e.jsx("input",{type:"text",className:"w-full px-4 py-2 rounded-xl border border-slate-200 dark:border-white/10 bg-slate-50 dark:bg-white/5 text-slate-900 dark:text-white focus:ring-2 focus:ring-purple-500 transition-all outline-none",placeholder:"예: 서울대 화공과 1차",value:s.title,onChange:t=>l({...s,title:t.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"지원 대학교"}),e.jsx("input",{type:"text",className:"w-full px-4 py-2 rounded-xl border border-slate-200 dark:border-white/10 bg-slate-50 dark:bg-white/5 text-slate-900 dark:text-white focus:ring-2 focus:ring-purple-500 outline-none",value:s.targetUniversity,onChange:t=>l({...s,targetUniversity:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"지원 학과"}),e.jsx("input",{type:"text",className:"w-full px-4 py-2 rounded-xl border border-slate-200 dark:border-white/10 bg-slate-50 dark:bg-white/5 text-slate-900 dark:text-white focus:ring-2 focus:ring-purple-500 outline-none",value:s.targetMajor,onChange:t=>l({...s,targetMajor:t.target.value})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"문항 내용"}),e.jsx("textarea",{className:"w-full px-4 py-2 h-24 rounded-xl border border-slate-200 dark:border-white/10 bg-slate-50 dark:bg-white/5 text-slate-900 dark:text-white focus:ring-2 focus:ring-purple-500 outline-none resize-none",value:s.questionText,onChange:t=>l({...s,questionText:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"경험 키워드 (활동 태그)"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"text",className:"flex-1 px-4 py-2 rounded-xl border border-slate-200 dark:border-white/10 bg-slate-50 dark:bg-white/5 text-slate-900 dark:text-white outline-none",placeholder:"예: 학생회장, 과학 캠프 등",value:s.keywordInput,onChange:t=>l({...s,keywordInput:t.target.value}),onKeyPress:t=>t.key==="Enter"&&M()}),e.jsx("button",{onClick:M,className:"px-4 py-2 bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-white rounded-xl",children:"추가"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.keywords.map(t=>e.jsxs("span",{className:"px-3 py-1 bg-purple-100 dark:bg-purple-500/20 text-purple-700 dark:text-purple-300 rounded-full text-xs flex items-center gap-1",children:[t," ",e.jsx("button",{onClick:()=>I(t),className:"hover:text-red-500",children:"×"})]},t))})]}),e.jsxs("button",{disabled:c,onClick:T,style:{backgroundColor:c?"#9ca3af":"#4f46e5"},className:"w-full py-4 text-white rounded-2xl font-bold flex items-center justify-center gap-2 shadow-lg shadow-purple-500/20 disabled:cursor-not-allowed transition-all",children:[c?e.jsx(g,{className:"animate-spin",color:"white"}):e.jsx(b,{size:20,color:"white"}),e.jsx("span",{className:"text-white",children:c?"AI가 자소서를 집필 중입니다...":"AI 초안 생성하기"})]})]})]})}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"p-6 bg-white dark:bg-white/5 rounded-[2rem] border border-slate-200 dark:border-white/10 shadow-sm h-full flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900 dark:text-white flex items-center gap-2",children:"2. 작성 결과 프리뷰"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(x),alert("복사되었습니다!")},className:"p-2 text-slate-400 hover:text-slate-900 dark:hover:text-white transition-colors",title:"복사하기",children:e.jsx(q,{size:18})}),e.jsx("button",{onClick:_,className:"p-2 text-slate-400 hover:text-green-500 transition-colors",title:"저장하기",children:e.jsx(G,{size:18})})]})]}),e.jsx("div",{className:"flex-1 bg-slate-50 dark:bg-black/20 rounded-2xl p-6 overflow-y-auto text-slate-800 dark:text-slate-200 leading-relaxed whitespace-pre-wrap min-h-[400px]",children:x||e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400",children:[e.jsx(X,{className:"mb-4 opacity-20",size:60}),e.jsx("p",{children:"왼쪽 정보를 입력하고 생성 버튼을 눌러주세요."})]})})]})})]}),E&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-300",children:e.jsxs("div",{className:"bg-white dark:bg-[#0d1117] w-full max-w-2xl rounded-[2.5rem] shadow-2xl border border-slate-200 dark:border-white/10 overflow-hidden flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"p-8 border-b border-slate-100 dark:border-white/5 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx(b,{className:"text-purple-500",size:24}),"생기부 키워드 추출기"]}),e.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"생기부 원문을 붙여넣으시면 AI가 핵심 경험을 찾아드립니다."})]}),e.jsx("button",{onClick:()=>h(!1),className:"p-2 text-slate-400 hover:text-slate-600 dark:hover:text-white transition-colors",children:"✕"})]}),e.jsx("div",{className:"p-8 flex-1 overflow-y-auto space-y-6",children:o?e.jsxs("div",{className:"space-y-6 animate-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"bg-purple-50 dark:bg-purple-500/5 p-6 rounded-3xl border border-purple-100 dark:border-purple-500/10",children:[e.jsx("h3",{className:"text-sm font-bold text-purple-700 dark:text-purple-300 mb-2",children:"활동 요약"}),e.jsxs("p",{className:"text-sm text-slate-700 dark:text-slate-300 leading-relaxed italic",children:['"',o.summary,'"']})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 mb-3",children:"추출된 키워드"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:o.keywords.map((t,a)=>e.jsxs("span",{className:"px-4 py-2 bg-white dark:bg-white/5 border border-slate-200 dark:border-white/10 text-slate-700 dark:text-slate-300 rounded-2xl text-xs font-bold shadow-sm",children:["#",t]},a))})]}),e.jsxs("div",{className:"pt-4 flex gap-3",children:[e.jsx("button",{onClick:()=>m(null),className:"flex-1 py-4 bg-slate-100 dark:bg-white/5 text-slate-600 dark:text-slate-300 rounded-2xl font-bold hover:bg-slate-200 transition-all",children:"다시 입력"}),e.jsx("button",{onClick:L,className:"flex-1 py-4 bg-[#4f46e5] text-white rounded-2xl font-bold shadow-lg shadow-indigo-500/20 hover:opacity-90 transition-all",children:"키워드 적용하기"})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-300",children:"생기부 원문(세특/창체 등) 입력"}),e.jsx("textarea",{className:"w-full h-64 p-4 rounded-3xl border border-slate-200 dark:border-white/10 bg-slate-50 dark:bg-black/20 text-slate-900 dark:text-white focus:ring-2 focus:ring-purple-500 outline-none resize-none transition-all",placeholder:"나이스(NEIS) 등에서 복사한 내용을 여기에 붙여넣으세요...",value:p,onChange:t=>y(t.target.value)}),e.jsx("button",{disabled:v,onClick:A,className:"w-full py-4 bg-slate-900 dark:bg-white text-white dark:text-black rounded-2xl font-bold flex items-center justify-center gap-2 disabled:opacity-50 transition-all hover:scale-[1.01]",children:v?e.jsxs(e.Fragment,{children:[e.jsx(g,{className:"animate-spin",size:20}),"분석 중..."]}):"키워드 추출 시작하기"})]})})]})})]})})},X=O.memo(({className:n,size:i=24})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:i,height:i,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:n,children:[e.jsx("path",{d:"M12 8V4H8"}),e.jsx("rect",{width:"16",height:"12",x:"4",y:"8",rx:"2"}),e.jsx("path",{d:"M2 14h2"}),e.jsx("path",{d:"M20 14h2"}),e.jsx("path",{d:"M15 13v2"}),e.jsx("path",{d:"M9 13v2"})]}));export{Z as default};
